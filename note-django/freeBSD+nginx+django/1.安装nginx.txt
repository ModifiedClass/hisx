1.安装nginx

#pkg install nginx

2.开机启动nginx
#ee /etc/rc.conf
编辑内容
sshd_enable="YES"
nginx_enable="YES"   #开机启动nginx
firewall_enable="YES"   #开机启动防火墙
firewall_type="workstation"   #防火墙类型
firewall_myservices="22/tcp 80/tcp 443/tcp"  #放行端口
firewall_allowservices="any"   #允许任意ip

保存文件并按CTRL + C ，键入exit ，然后按ENTER关闭编辑器。
启动防火墙
#nohup service ipfw start >/tmp/ipfw.log 2>&1
如果提示：Ambiguous output redirect
执行
#nohup service ipfw start >&/tmp/ipfw.log
防火墙其他操作
service ipfw stop
service ipfw start
service ipfw restart

启动nginx
service nginx start
现在通过ip或域名访问服务器就可以得到nginx的启动画面了。

3.配置nginx
#ee /usr/local/etc/nginx/nginx.conf
编辑内容
user  root;      #用户
worker_processes  auto;  #工作进程数

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        access_log /var/log/nginx/access.log;  #服务器访问日志
        error_log /var/log/nginx/error.log;   #nginx错误日志
        listen       80;   #监听端口
        server_name  0.0.0.0; #公网IP或域名

        location / {
            root   /usr/local/www;  #网站目录
            index  index.html index.htm;  #索引文件
        }
    }
}
保存退出
检查语法错误
#sudo nginx -t
重启nginx
#service nginx reload

如果需同一服务器部署多域名多网站
在nginx.conf最后加一行
include vhost/*.conf;

然后在/usr/local/etc/nginx/目录下新建目录vhost
#mkdir vhost
在vhost目录下为每个网站新建一个conf配置文件
内容如下
server
{
    listen 8080;  #监听端口
    server_name www.**.com;  #域名
    index index.html;         #网站主页文件
    root /usr/local/www/html1; #网站目录
    error_page 404/ 404.html;  #错误页
    location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$
    {
        expires 30d;
    }
    location ~ .*.(js|css)?$
    {
        expires 12h;
    }
    access_log /var/log/nginx/html1access.log; #访问日志
}
保存，有几个网站就增加几个文件，关键是域名和监听端口不同。
重新读取配置
#/usr/local/nginx/sbin/nginx -s reload
最后在云服务器将各网站域名解析到服务器公网ip。

安装ssl证书
以腾讯云为例，申请到免费ssl证书后，有两个文件 .crt .key
都上传到服务器的/usr/local/etc/nginx/目录
然后修改nginx.conf文件

server {
     listen 443;
     server_name www.**.com; #填写绑定证书的域名
     ssl on;
     ssl_certificate 1_www.**.com_bundle.crt;#证书文件名称
     ssl_certificate_key 2_www.**.com.key;#私钥文件名称
     ssl_session_timeout 5m;
     ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #请按照这个协议配置
     ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#请按照这个套件配置
     ssl_prefer_server_ciphers on;
     location / {
         root /var/www/www.**.com; #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。
         index  index.html index.htm;
     }
 }
server {
listen 80;
server_name www.**.com; #填写绑定证书的域名
rewrite ^(.*)$ https://$host$1 permanent; #把http的域名请求转成https
}
保存退出，重启nginx后，访问域名就会发现是https了。

4.nginx其他命令
停止
#service nginx stop  
重启
#service nginx restart
不断开连接重新读取配置
#service nginx reload